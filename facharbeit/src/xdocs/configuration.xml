<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE document PUBLIC "-//APACHE//DTD Documentation V2.0//EN" "http://forrest.apache.org/dtd/document-v20.dtd">
<document>
  <header>
    <title>Konfiguration</title>
  </header>
  <body>
    <section id="in-gerneral">
      <title>Allgemein</title>
      <p>
        Jegliche Konfiguration des Ressourcenbuchungssystems findet in der Datei
        <code>config.inc.php</code> statt. Bei einer neuen Installation existiert
        diese Datei jedoch noch nicht, nur <code>config.inc.php-dist</code>, 
        eine Beispielkonfiguration. Sie können diese Datei einfach nach 
        <code>config.inc.php</code> kopieren und diese dann bearbeiten.
      </p>
      <p>
        <strong>Achtung:</strong><br />
        Nicht dokumentierte Variabeln haben zur Zeit keine Wirkung, da z.B. 
        beim <a href="http://de.wikipedia.org/wiki/Abspaltung_(Softwareentwicklung)">Fork</a>
        von MRBS einige Module, wie z.B. die Authentifizierung über LDAP, 
        deaktiviert wurden, oder die Variabeln sind nur während der Entwicklung
        bedeutent und sollten deshalb nicht verändert werden.
      </p>
    </section>
    <section id="database">
      <title>Datenbank</title>
      <p>
        Der erste Abschnitt der Konfiguration von Schoorbs in der Datei 
        <code>config.inc.php</code> betrifft die Einstellungen zur Datenbank.
        Wie schon im Kapitel zur Installation erwähnt, hat man bei Schoorbs nur
        die Wahl zwischen MySQL und PostgreSQL. Jedoch gibt es für die Nutzung
        von MySQL zwei unterschiedliche Module, ein Mal das Module 
        <code>mysqli</code>, welches an sich nur für Syteme mit PHP 5+ und 
        MySQL 5+ eignet, bei diesen aber sehr empfehlenswert ist. Für alle
        anderen Systeme mit MySQL sollte man das Modul <code>mysql</code> 
        nutzen. Für den Zugriff auf PostgreSQL steht nur das Modul
        <code>pgsql</code> zur Verfügung. Das jeweils passende Modul schreiben
        Sie als Wert zur Variable <code>$dbsys</code>. In die Variable
        <code>$db_host</code> tragen sie den Namen des Computers ein, auf welchem
        der Datenbankserver läuft, bei PostgreSQL können sie diesen Wert auch
        leer lassen, wenn sie möchten, dass die Verbindung zur Datenbank anstatt
        über TCP/IP per Unix Socket geschiet. Den Namen der Datenbank tragen
        Sie bei der Variable <code>$db_database</code> ein. Nutzername und
        Passwort gehören in die Variabeln <code>$db_login</code> und
        <code>$db_password</code>. In <code>$db_tbl_prefix</code> tragen Sie
        den während der Installation gewählten Tabellenpräfix ein, meistens ist
        dies 'schoorbs_' oder 'mrbs_'. Als letzte Konfigurationsmöglichkeit
        können Sie wählen, ob Sie peristente Datenbankverbindungen haben wollen.
        Sie sollten diese jedoch nur nutzen, wenn Sie genau wissen, was Sie tun,
        ansonsten empfiehlt sich das Deaktivieren von peristenten Verbindungen,
        welches durch das Setzen von <code>$db_nopersist = 1;</code> bewirkt
        wird.
      </p>
      <p>
        <strong>Beispielkonfiguration (für eine Verbindung per MySQLi):</strong>
      </p>
      <source>$dbsys = "mysqli";
$db_host = "localhost";
$db_database = "schoorbs";
$db_login = 'schoorbs';
$db_password = 'geheimes_passwort';
$db_tbl_prefix = "schoorbs_";
$db_nopersist = 1;</source>
    </section>
    <section id="site-id">
      <title>Seiteninformationen</title>
      <p>
        Als sogenannte Seiteninformationen kann man hier nur den Administrations-Kontakt
        und den Titel der Seite festlegen. Den Namen des Administrators weist 
        man der Variable <code>$mrbs_admin</code> zu, seine E-Mail trägt man in
        <code>$mrbs_admin_email</code> ein. Den Titel der Seite legt man in der
        Variable <code>$mrbs_company</code> fest, dieser Titel kann auch (X)HTML-Tags
        wie z.b. <code>&lt;a&gt;</code> enthalten.
      </p> 
      <p>
        <strong>Beispielkonfiguration:</strong>
      </p>
      <source>$mrbs_admin = "Uwe L. Korn";
$mrbs_admin_email = "uwelk@xhochy.org";
$mrbs_company = "Hohenstaufen Gymnasium Kaiserslautern";</source>
    </section>
    <section id="calendar">
      <title>Kalender / Zeiteinheiten</title>
      <p>
        Bei Schoorbs gibt es 2 Möglichkeiten die Zeiteinheiten, welche gebucht
        werden können festzulegen. Auf der einen Seite gibt es die Möglichkeit
        eine feste Dauer(<code>$resolutuin</code>) in Sekunden anzugeben, die 
        für jede Einheit gilt. Solche Einheiten kann man zwischen einem 
        angebenen Tagesstart(<code>$morningstarts</code> (Stunde) und 
        <code>$morningstarts_minutes</code> (Minuten)) und einem angebenen 
        Tagesende(<code>$eveningends</code> (Stunde) und 
        <code>$eveningends_minutes</code> (Minuten)) buchen. Hat man z.B. als 
        Tagesstart 7:30 angeben, und als Auflösung 1800(-> 1/2 h) gewählt, so
        kann man jeweils um 7:30, 8:00, 8:30, ... eine Einheit buchen.<br />
        Möchte man nun aber Zeiteinheiten mit unterschiedlicher Länge bzw.
        möchte man die Einheit überhaupt nicht über die Zeit, sondern über
        einen spezifischen Namen bestimmen, so kann man einen Array(<code>$periods</code>)
        angeben, welche Einheiten verfügbar sein sollen. Um diese Funktion
        zu nutzen, muss man die Variable <code>$enable_periods</code> auf
        <code>true</code> setzen.<br />
        Allgemein gesehen kann man noch auswählen, ob der Wochenbeginn an einem
        Sonntag(<code>$weekstarts = 0;</code>) oder an einem Montag
        (<code>$weekstarts = 1;</code>) ist. 
      </p>
      <p>
        <strong>Beispielkonfiguration mit festen Zeiteinheiten:</strong>
      </p>
      <source>$enable_periods = false;
$resolution = 2700;
$morningstarts = 8;
$eveningends   = 17;
$morningstarts_minutes = 0;
$eveningends_minutes = 0;
$periods[] = array();
$weekstarts = 1;</source>
      <p>
        <strong>Beispielkonfiguration mit benannten Zeiteinheiten</strong>
      </p>
      <source>$enable_periods = true;
$resolution = 2700;
$morningstarts = 8;
$eveningends   = 17;
$morningstarts_minutes = 0;
$eveningends_minutes = 0;
$periods[] = "08:00-08:45";
$periods[] = "08:45-09:30";
$periods[] = "09:30-09:45";
$periods[] = "09:45-10:30";
$periods[] = "10:30-11:15";
$periods[] = "11:15-11:30";
$periods[] = "11:30-12:15";
$periods[] = "12:15-13:00";
$periods[] = "13:00-13:15";
$periods[] = "13:15-14:00";
$periods[] = "14:00-14:45";
$periods[] = "14:45-15:30";
$periods[] = "15:30-16:15";
$weekstarts = 1;</source>
    </section>
  </body>
</document>
