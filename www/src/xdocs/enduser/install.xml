<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE document PUBLIC "-//APACHE//DTD Documentation V2.0//EN" "http://forrest.apache.org/dtd/document-v20.dtd">
<document>
  <header>
    <title>Installation</title>
  </header>
  <body>
    <section id="requirements">
      <title>Prerequests</title>
      <p>
        In opposite to the active development on Schoorbs, for the normal usage
        you only need few dependencies. The following software should be 
        sufficient:
      </p>
      <ul>
        <li>
          A modern HTTP server, e.g. Apache or Lighty
        </li>
        <li>
          PHP >= 4.3 as servermodul(SAPI) or via Fast(CGI)
        </li>
        <li>
          Considering the database, we support at the moment PosgtreSQL >= 7.x 
          and MySQL >= 4.x. The fitting PHP-module for the database must be
          installed too.
        </li>
      </ul>
    </section>
    <section id="long">
      <title>How to install</title>
      <p>
        If you use Schoorbs, you should always take care that your running
        version is up to date, because only the latest version has the most 
        security because nearly all known bugs are fixed in it, you should check
        periodically if there is a new one. The latest Schoorbs version could
        always be found on <a href="http://schoorbs.xhochy.com/">schoorbs.xhochy.com</a>,
        where it is provided in 2 versions, a ZIP-archive and a 7z-archive.
        Both include the same files, but the 7z-archive is due the higher 
        compression rate of the LZMA algorithm a lot smaller. Although 7z
        offers better compression, not on every computer there is are program
        which could extract them, so you could alternately download the 
        ZIP-archive.<br />
        The chosen archive should be extracted in a directory which could be
        accessed by the web server. 
      </p>
      <p>
      	At the moment we use the template engine <a href="http://www.smarty.net/">Smarty</a>
      	which needs to have write-rights on the folder
      	<code>schoorbs-includes/Smarty/templates_c</code> to temproraly store the
      	page. If you are using Linux you could apply these right via the following
      	command:
      </p>
      <p>
        <code>chmod a+rw -R schoorbs-includes/Smarty/templates_c</code>
      </p>
      <p>
        Since on most Linux systems the web server runs as user www-data you could
        set the owner of that folder to this user which is the more secure way,
        but therefore you may need additional rights.
      </p>
      <p>
        <code>chown -R www-data:www-data schoorbs-includes/Smarty/templates_c</code>
      </p>
      <p>
        <!-- Installation Datenbank -->
        Schoorbs saves all his data(e.g. meetings) in a database. At the moment
        only MySQL and PostgreSQL are supported. Since those two systems differ
        in the way how you create the initial database structure, in the 
        following I will provide seperate explanations for both.
        You can find in the directory <code>schoorbs-misc/install-sql</code> for
        both database systems SQL-scripts that will help you during the process.
        Those scripts will be used and explained in the next paragraphs.
      </p>
      <p>        
        <!-- Installation MySQL -->
        <strong>MySQL based database installation:</strong>
      </p>
      <p>
        To require no additional software, I will explain the MySQL based way
        using the command line utilities that ship with MySQL. As a prerequest
        there must exist a database user who has write permissions to the 
        database in which Schoorbs should store its data. There are 2 prewritten
        scripts for MySQL available: <code>tables.my.sql</code> and 
        <code>tables-legacy.my.sql</code>. The first one create database tables
        with the prefix 'schoorbs_', the second one creates legacy tables with
        the prefix 'mrbs_'. If you want an other prefix for your tables, you 
        have to edit one of this files and replace all occurences of 'schoorbs_'
        or 'mrbs_' with your own prefix.<br />
        After you have decided which prefiy you want to use, you insert the table 
        structure with the following command line into the database:
      </p>
      <p>
        <code>mysql -u &lt;User&gt; -p &lt;Database&gt; &lt; tables.my.sql</code>
      </p>
      <p>  
        <!-- Installation PostgreSQL -->
        <strong>PostgreSQL based database installation:</strong>
      </p>
      <p>
        If you want to use PostgreSQL, you have to take care which version, you
        are using since there have been some significant changes, that require 
        to other table creation code for newer versions(>= 7.3). You can check 
        your PostgreSQL version with:
      </p>
      <p>
        <code>psql -V</code>
      </p>
      <p>
        Depending on your version of PostgreSQL there exist the SQL-scripts
        <code>tables.pg.73and_above.sql</code> and 
        <code>tables-legacy.pg.73and_above.sql</code> or 
        <code>tables.pg.sql</code> and <code>tables-legacy.sql</code>. 
        The first two apply for the PostgreSQL versions 7.3 and following, the 
        other two for older versions. The scripts with 'legacy' in their name
        create tables with the prefix 'mrbs_', the other ones with 'schoorbs_'.
        If you want to have an other prefix you have to edit one of those files
        manually.<br />
        After you have decided which prefiy you want to use, you insert the table 
        structure with the following command line into the database:
      </p>
      <p class="pageBreakAfter">
        <code>psql -a -f tables.pg.sql &lt;Database&gt;</code>
      </p>
    </section>
    <p>
      <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">
        <img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/80x15.png" />
      </a>
    </p>
  </body>
</document>
